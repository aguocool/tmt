summary: Run the full tmt test suite in an external system
description: |
    Run under a local virtual machine:
    tmt run

    Schedule a job using workflow-tomorrow:
    tmt test export --fmf-id | wow fedora-35 x86_64 --fmf-id -

    Following environment variables are recognized:

    REPO - url to git repository to clone,
           defaults to github.com/teemtee/tmt
    BRANCH - branch, commit or tag to checkout,
             defaults to REPO's default branch
    KEEP_VERSION - when '1' tests keeps version and release
                  of the spec, otherwise 9.9.9.9 is used
    SKIP_INSTALL - when '1' tmt is not built nor installed,
                   is expected to be present on the system
    PLANS - space separated names of plans to execute,
            when not set all enabled plans are run
    TESTS_CMD - when not empty it is placed as is after
               `tests` subcommand (e.g. "-n /tests/unit")
    COVERAGE ... when "1" measure coverage per plan and total

test: ./test.sh
framework: beakerlib
adjust:
- when: distro != fedora
  require+:
  - library(epel/epel)
require:
- rsync
- git-core
- rpm-build
- make
- procps-ng
recommend:
- guestfs-tools
- python3-docutils
- python3-coverage
duration: 8h
extra-hardware: |
  keyvalue=HVM=1
  hostrequire=memory >= 6144
  hostrequire=hypervisor=
